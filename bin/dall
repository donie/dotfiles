#!/bin/bash

# Prompt the user to input links
echo "Enter the links you want to download. Press Enter on an empty line when finished."

# Initialize an empty array to store the links
links=()

# Loop to continuously prompt for input
while true; do
    read -e -p "> " link
    if [ -z "$link" ]; then
        break
    fi
    links+=("$link")
done

# Check if any links were provided
if [ ${#links[@]} -eq 0 ]; then
    echo "No links provided. Exiting."
    exit 1
fi

# Show the links
echo "You entered the following links:"
for ((i=0; i<${#links[@]}; i++)); do
    echo "$(($i + 1)). ${links[$i]}"
done

# Confirmation: Enter or y/Y proceeds; n/N cancels; anything else re-prompts
while true; do
    read -p "Press Enter to download, or type y to confirm, n to cancel: " confirm
    if [[ -z "$confirm" || "$confirm" =~ ^[Yy]$ ]]; then
        for link in "${links[@]}"; do
            wget "$link"
        done
        echo "Download complete."
        break
    elif [[ "$confirm" =~ ^[Nn]$ ]]; then
        echo "Download cancelled."
        break
    else
        echo "Please press Enter or type y to download, or n to cancel."
    fi
done
